<!DOCTYPE html>
<html>
<head>
	<title>新世界狂歡角色計算表</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js'></script> -->
	<!-- <script src='https://cdn.jsdelivr.net/npm/vue@3.2.33/dist/vue.global.min.js'></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" > -->

	<script src='https://cdn.jsdelivr.net/npm/vue@3.2.33/dist/vue.global.min.js'></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet" >

	<link rel='stylesheet' href='./res/css/charLevelMain.css' />
</head>

<body>
	
	<div id='NuCarnivalCharChartApp'>
		<div class="container">
			<div class="row justify-content-center text-center">
				<div class="col-xs-18 col-md-17 col-lg-9">
					<h4>新世界狂歡：角色數值表</h4>
          <span>（SSR蜜話加成=60%）</span>
					<hr>
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-xs-12 col-md-12 col-lg-9 align-self-start">
					表格方式：
					<div class="form-check form-check-inline" title="潛力表">
						<input class="form-check-input" type="radio" id="potentialMode" value="potential" v-model="input.displayMode" />
						<label class="form-check-label no-select" for="potentialMode">潛力表</label>
					</div>
					<div class="form-check form-check-inline" title="等級表">
						<input class="form-check-input" type="radio" id="levelMode" value="level" v-model="input.displayMode" />
						<label class="form-check-label no-select" for="levelMode">等級表</label>
					</div>
					<div class="form-check form-check-inline" title="房間表">
						<input class="form-check-input" type="radio" id="roomMode" value="room" v-model="input.displayMode" />
						<label class="form-check-label no-select" for="roomMode">房間表</label>
					</div>
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-xs-12 col-md-12 col-lg-9 align-self-start">
					HP / ATK：
					<div class="form-check form-check-inline" title="HP和ATK">
						<input class="form-check-input" type="radio" id="showBoth" value="both" v-model="input.atkOrHp" />
						<label class="form-check-label no-select" for="showBoth">HP和ATK</label>
					</div>
					<div class="form-check form-check-inline" title="顯示HP">
						<input class="form-check-input" type="radio" id="showHP" value="hp" v-model="input.atkOrHp" />
						<label class="form-check-label no-select" for="showHP">HP</label>
					</div>
					<div class="form-check form-check-inline" title="顯示ATK">
						<input class="form-check-input" type="radio" id="showATK" value="atk" v-model="input.atkOrHp" />
						<label class="form-check-label no-select" for="showATK">ATK</label>
					</div>
					<hr />
				</div>
			</div>

			<div class="row justify-content-center">
				<div class="form-group col-xs-12 col-md-12 col-lg-9 align-self-start">
					<div class="form-check-inline">
						<label for="inputCharName">角色名稱</label>
						<select id="inputCharName" class="form-select" v-model="input.charName">
							<option v-for="name in CHAR_NAMES" :value="name">{{ name }}</option>
						</select>
					</div>
					<div class="form-check-inline">
						<label for="inputCharId">角色卡片</label>
						<select id="inputCharId" class="form-select" v-model="input.charId">
							<option v-for="(char, charId) in charData[input.charName]" :value="charId">{{ charId }}</option>
						</select>
					</div>
				</div>
			</div>

			<div class="row justify-content-center">
				<div class="form-group col-xs-12 col-md-12 col-lg-9">
					<span class="form-check-inline" v-if="input.displayMode != 'level'">
						<label for="inputLevel">等級</label>
						<input class="form-control" type="text" inputmode="numeric" id="inputLevel" v-model="input.level">
					</span>
					<span class="form-check-inline" v-if="input.displayMode != 'room'">
						<label for="inputRoom">房間</label>
						<select id="inputRoom" class="form-select" v-model="input.room">
							<option v-if="hasRoom" v-for="room in rooms" :value="room">{{ room }}</option>
							<option v-else value="無">無</option>
						</select>
					</span>
					<template v-if="input.displayMode != 'potential'">
						<span class="form-check-inline">
							<label for="inputPot">潛力</label>
							<select id="inputPot" class="form-select" v-model="input.potential">
								<option v-for="(val, idx) in tierMax" :value="val">{{ val }}</option>
							</select>
						</span>
						<template v-for="(potVal, idx) in input.pot">
							<span class="form-check-inline potentialForm" title="">
								<input class="form-check-input" :class="getPotBoxClass(idx)" type="checkbox" :checked="input.pot[idx]" v-model="input.pot[idx]" />
							</span>
						</template>
					</template>
					<div class="form-check-inline">
						<label for="inputExtraHP">HP加成(%)</label>
						<input class="form-control" type="text" inputmode="numeric" id="inputExtraHP" v-model="input.extra.hp">
					</div>
					<div class="form-check-inline">
						<label for="inputExtraATK">ATK加成(%)</label>
						<input class="form-control" type="text" inputmode="numeric" id="inputExtraATK" v-model="input.extra.atk">
					</div>
				</div>
			</div>

			<div v-if="input.displayMode != 'potential'" class="row justify-content-center">
				<div class="form-group col-xs-12 col-md-12 col-lg-9">
					<div style="font-size: 0.8rem">
					<span>潛力加成：</span>
					<span>HP: {{ getCurrentPotenial('hp') }} %　</span>
					<span>ATK: {{ getCurrentPotenial('atk') }} %</span>
					</div>
				</div>
			</div>
			

			<div class="row justify-content-center text-center">
				<div class="col-xs-18 col-md-17 col-lg-9">
					<hr />
					<div class="table-responsive">
						<table class="table resultTable">
							<thead>
								<tr class="header">
									<th scope="col"></th>
									<th v-if="input.atkOrHp == 'both'" scope="col" colspan="2" v-for="star in 5" :class="highlightTableColHeader(star)">{{ star }} 星</th>
									<th v-else scope="col" v-for="star in 5" :class="highlightTableColHeader(star)">{{ star }} 星</th>
								</tr>
								<tr class="header">
									<th scope="col">{{ tableHeader }}</th>
									<template v-for="star in 5" :key="star">
										<th v-if="displayHP" scope="col" :class="highlightTableHpOrAtkHeader(star, 'hp')">HP</th>
										<th v-if="displayATK" scope="col" :class="highlightTableHpOrAtkHeader(star, 'atk')">ATK</th>
									</template>
								</tr>
							</thead>
							<tbody>
								<tr v-if="input.displayMode == 'level'" v-for="level in levels" :key="level">
									<th scope="row" class="col-md-1" :class="highlightTableRowHeader(level)">
										<div>{{ level }}</div>
									</th>
									<template v-for="star in 5" :key="star">
										<td v-if="displayHP" :class="highlightTableRecord(star, level, 'hp')" @click="selectTableRecord(star, level, 'hp')">{{ calculateCharValue(input.charName, input.charId, star, level, getRoomPercentage(input.room), getCurrentPotenial('hp'), 'hp') }}</td>
										<td v-if="displayATK" :class="highlightTableRecord(star, level, 'atk')" @click="selectTableRecord(star, level, 'atk')">{{ calculateCharValue(input.charName, input.charId, star, level, getRoomPercentage(input.room), getCurrentPotenial('atk'), 'atk') }}</td>
									</template>
								</tr>

								<tr v-if="input.displayMode == 'room'" v-for="room in rooms" :key="room">
									<th scope="row" class="col-md-1" :class="highlightTableRowHeader(room)">
										<div>{{ room }}</div>
									</th>
									<template v-for="star in 5" :key="star">
										<td v-if="displayHP" :class="highlightTableRecord(star, room, 'hp')" @click="selectTableRecord(star, room, 'hp')">{{ calculateCharValue(input.charName, input.charId, star, input.level, getRoomPercentage(room), getCurrentPotenial('hp'), 'hp') }}</td>
										<td v-if="displayATK" :class="highlightTableRecord(star, room, 'atk')" @click="selectTableRecord(star, room, 'atk')">{{ calculateCharValue(input.charName, input.charId, star, input.level, getRoomPercentage(room), getCurrentPotenial('atk'), 'atk') }}</td>
									</template>
								</tr>

								<tr v-if="input.displayMode == 'potential'" v-for="(tier, idx) in tierMax+1" :key="idx">
									<th scope="row" class="col-md-1" :class="highlightTableRowHeader(idx)">
										<div>{{ idx }}</div>
										<div v-if="displayHP" style="font-size: 0.5rem;" >HP：{{ getPotentialPercentOfOneTier('hp', idx) }}%</div>
										<div v-if="displayATK" style="font-size: 0.5rem;" >ATK：{{ getPotentialPercentOfOneTier('atk', idx) }}%</div>
									</th>
									<template v-for="star in 5" :key="star">
										<td v-if="displayHP" :class="highlightTableRecord(star, idx, 'hp')" @click="selectTableRecord(star, idx, 'hp')">{{ calculateCharValue(input.charName, input.charId, star, input.level, getRoomPercentage(input.room), getPotentialPercent('hp', tier), 'hp') }}</td>
										<td v-if="displayATK" :class="highlightTableRecord(star, idx, 'atk')" @click="selectTableRecord(star, idx, 'atk')">{{ calculateCharValue(input.charName, input.charId, star, input.level, getRoomPercentage(input.room), getPotentialPercent('atk', tier), 'atk') }}</td>
									</template>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			
		</div>
	</div>

	<script type="text/javascript" src="./res/js/charStatMain.js"></script>

	
</body>

</html>